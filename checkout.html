<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout | Slappin Candy</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>üç¨ Checkout</h1>
    <a href="cart.html" class="btn">Back to Cart</a>
  </header>

  <section class="checkout">
    <h2>Order Details</h2>

    <form id="checkout-form">
      <label for="name">Name:</label>
      <input type="text" id="name" required>

      <label for="email">Email:</label>
      <input type="email" id="email" required>

      <label>Order Type:</label>
      <label>
        <input type="radio" name="orderType" value="pickup" checked> Local Pickup
      </label>
      <label>
        <input type="radio" name="orderType" value="delivery"> Local Delivery
      </label>
      <label>
        <input type="radio" name="orderType" value="shipping"> Ship Nationwide
      </label>

      <div id="address-fields" style="display:none;">
        <label for="address">Address:</label>
        <input type="text" id="address">
        <label for="city">City:</label>
        <input type="text" id="city">
        <label for="zip">ZIP Code:</label>
        <input type="text" id="zip">
      </div>

      <button type="submit" class="btn">Place Order</button>
    </form>

    <p id="confirmation" style="display:none; font-weight:bold;"></p>
  </section>

  <script src="script.js"></script>
  <script>
    const orderTypeRadios = document.getElementsByName('orderType');
    const addressFields = document.getElementById('address-fields');
    const checkoutForm = document.getElementById('checkout-form');
    const confirmation = document.getElementById('confirmation');

    // Show/hide address fields
    orderTypeRadios.forEach(radio => {
      radio.addEventListener('change', () => {
        if (radio.value === 'pickup' && radio.checked) {
          addressFields.style.display = 'none';
        } else {
          addressFields.style.display = 'block';
        }
      });
    });

    // Handle form submission
    checkoutForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const orderType = document.querySelector('input[name="orderType"]:checked').value;
      let address = '';
      if(orderType !== 'pickup'){
        address = document.getElementById('address').value + ', ' +
                  document.getElementById('city').value + ', ' +
                  document.getElementById('zip').value;
      }

      // Fake order processing
      confirmation.style.display = 'block';
      confirmation.textContent = `Thank you ${name}! Your ${orderType} order ${
        address ? 'to ' + address : ''
      } has been received! We'll email you at ${email}.`;

      // Clear cart
      cart = [];
      localStorage.removeItem('cart');
    });
  </script>

</body>
</html>